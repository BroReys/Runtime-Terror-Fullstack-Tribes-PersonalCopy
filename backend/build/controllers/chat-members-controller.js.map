{"version":3,"sources":["../../src/controllers/chat-members-controller.js"],"names":["addChatMembers","req","res","members","body","chatId","params","id","ChatService","findById","chat","UserService","user","owner","status","json","undefined","owner_id","ChatMemberService","createMultipleMembers","membersResult"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,cAAc;AAAA,2FAAG,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBC,YAAAA,OADiB,GACPF,GAAG,CAACG,IAAJ,CAASD,OADF;AAEjBE,YAAAA,MAFiB,GAERJ,GAAG,CAACK,MAAJ,CAAWC,EAFH;AAAA;AAAA,mBAGJC,wBAAYC,QAAZ,CAAqBJ,MAArB,CAHI;;AAAA;AAGjBK,YAAAA,IAHiB;AAAA;AAAA,mBAIHC,wBAAYF,QAAZ,CAAqBR,GAAG,CAACW,IAAJ,CAASL,EAA9B,CAJG;;AAAA;AAIjBM,YAAAA,KAJiB;;AAAA,kBAMjBA,KAAK,KAAK,IANO;AAAA;AAAA;AAAA;;AAOnBX,YAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,8BAAqB,iBAArB,CAArB;AAPmB;AAAA;;AAAA;AAAA,kBASVV,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAKW,SATpB;AAAA;AAAA;AAAA;;AAUnBd,YAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,8BAAqB,qBAArB,CAArB;AAVmB;AAAA;;AAAA;AAAA,kBAYVL,IAAI,KAAK,IAZC;AAAA;AAAA;AAAA;;AAanBR,YAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,8BAAqB,iBAArB,CAArB;AAbmB;AAAA;;AAAA;AAAA,kBAeVF,KAAK,CAACN,EAAN,IAAYG,IAAI,CAACO,QAfP;AAAA;AAAA;AAAA;;AAgBnBf,YAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,8BACjB,qDADiB,CAArB;AAhBmB;AAAA;;AAAA;AAAA,kBAmBVZ,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAKa,SAnBtB;AAAA;AAAA;AAAA;;AAoBnBd,YAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CACI,8BAAqB,gDAArB,CADJ;AApBmB;AAAA;;AAAA;AAAA;AAAA,mBAwBOG,8BAAkBC,qBAAlB,CAAwCT,IAAxC,EACtBP,OADsB,CAxBP;;AAAA;AAwBfiB,YAAAA,aAxBe;AA0BnBlB,YAAAA,GAAG,CAACa,IAAJ,CAASK,aAAT;;AA1BmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAdpB,cAAc;AAAA;AAAA;AAAA,GAApB;;eA8Be;AACbA,EAAAA,cAAc,EAAdA;AADa,C","sourcesContent":["import ChatService from \"../services/chat-services/chat-service\";\nimport generateErrorMessage from \"../utilities/error-message\";\nimport ChatMemberService from \"../services/chat-services/chat-member-service\";\nimport UserService from \"../services/user-service\";\n\nconst addChatMembers = async (req, res) => {\n  let members = req.body.members;\n  let chatId = req.params.id;\n  let chat = await ChatService.findById(chatId);\n  let owner = await UserService.findById(req.user.id);\n\n  if (owner === null) {\n    res.status(404).json(generateErrorMessage('User not found!'));\n\n  } else if (chatId === null || chatId === undefined) {\n    res.status(400).json(generateErrorMessage('Chat ID is missing!'));\n\n  } else if (chat === null) {\n    res.status(404).json(generateErrorMessage('Chat not found!'));\n\n  } else if (owner.id != chat.owner_id) {\n    res.status(401).json(generateErrorMessage(\n        'Only owner of the chat can add members to the chat!'));\n\n  } else if (members === null || members === undefined) {\n    res.status(400).json(\n        generateErrorMessage('At least one member must be added to the chat!'));\n\n  } else {\n    let membersResult = await ChatMemberService.createMultipleMembers(chat,\n        members);\n    res.json(membersResult);\n  }\n};\n\nexport default {\n  addChatMembers\n};\n\n"],"file":"chat-members-controller.js"}