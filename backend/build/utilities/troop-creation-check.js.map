{"version":3,"sources":["../../src/utilities/troop-creation-check.js"],"names":["canAfford","kingdomId","type","quantity","KingdomRepository","findKingdomById","kingdom","kingdomGold","gold","val","troopsTotalGoldCost","gold_cost","save"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,SAAS;AAAA,2FAAG,iBAAOC,SAAP,EAAkBC,IAAlB,EAAwBC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACIC,8BAAkBC,eAAlB,CAAkCJ,SAAlC,CADJ;;AAAA;AACZK,YAAAA,OADY;AAEZC,YAAAA,WAFY,GAEED,OAAO,CAACE,IAFV,EAGhB;;AAHgB,uDAIA,8BAJA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAIPC,YAAAA,GAJO;;AAAA,kBAMVA,GAAG,KAAKP,IANE;AAAA;AAAA;AAAA;;AAORQ,YAAAA,mBAPQ,GAOc,+BAAaD,GAAb,EAAkBE,SAAlB,GAA8BR,QAP5C;;AAAA,kBAQRO,mBAAmB,IAAIH,WARf;AAAA;AAAA;AAAA;;AASVD,YAAAA,OAAO,CAACE,IAAR,IAAgBE,mBAAhB;AATU;AAAA,mBAUJJ,OAAO,CAACM,IAAR,EAVI;;AAAA;AAAA,6CAWH,IAXG;;AAAA;AAAA,6CAaH,KAbG;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATZ,SAAS;AAAA;AAAA;AAAA,GAAf","sourcesContent":["import KingdomRepository from \"../repositories/kingdom-repository\";\nimport {troopRules} from \"../rules/troops-rules\";\n\nconst canAfford = async (kingdomId, type, quantity) => {\n  let kingdom = await KingdomRepository.findKingdomById(kingdomId);\n  let kingdomGold = kingdom.gold;\n  // --->looping through troopsRules object tree, finding corresponding value<---\n  for (let val in troopRules()) {\n    //--->if matches values matches type, fetch object and calculate<---\n    if (val === type) {\n      let troopsTotalGoldCost = troopRules()[val].gold_cost * quantity;\n      if (troopsTotalGoldCost <= kingdomGold) {\n        kingdom.gold -= troopsTotalGoldCost\n        await kingdom.save()\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n}\n\nexport {canAfford};\n"],"file":"troop-creation-check.js"}