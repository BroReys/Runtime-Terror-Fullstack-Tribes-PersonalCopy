{"version":3,"sources":["../../src/utilities/generate-confirmation-token.js"],"names":["generateConfirmationToken","result","characters","i","charAt","Math","floor","random","length","userWithLink","User","findOne","where","registrationToken","user"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA,IAAMA,yBAAyB,GAAG,SAA5BA,yBAA4B,GAAM;AACtC,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,UAAU,GAAG,gEAAjB;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3BF,IAAAA,MAAM,IAAIC,UAAU,CAACE,MAAX,CAAkBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KACnCL,UAAU,CAACM,MADa,CAAlB,CAAV;AAED;;AAED,MAAMC,YAAY;AAAA,6FAAG,iBAAOR,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACAS,iBAAKC,OAAL,CAAa;AAC9BC,gBAAAA,KAAK,EAAE;AACLC,kBAAAA,iBAAiB,EAAEZ;AADd;AADuB,eAAb,CADA;;AAAA;AACba,cAAAA,IADa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZL,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAQA,MAAIR,MAAM,KAAKQ,YAAY,CAACR,MAAD,CAAZ,CAAqBY,iBAApC,EAAuD;AACrDb,IAAAA,yBAAyB;AAC1B,GAFD,MAEO;AACL,WAAOC,MAAP;AACD;AACF,CAtBD;;eAwBeD,yB","sourcesContent":["import User from \"../models/user\";\n\nconst generateConfirmationToken = () => {\n  let result = '';\n  let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n  for (let i = 0; i < 24; i++) {\n    result += characters.charAt(Math.floor(Math.random() *\n        characters.length));\n  }\n\n  const userWithLink = async (result) => {\n    const user = await User.findOne({\n      where: {\n        registrationToken: result\n      }\n    })\n  }\n\n  if (result === userWithLink(result).registrationToken) {\n    generateConfirmationToken();\n  } else {\n    return result;\n  }\n}\n\nexport default generateConfirmationToken;"],"file":"generate-confirmation-token.js"}